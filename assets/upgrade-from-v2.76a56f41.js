var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,l=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&i(e,a,t[a]);if(n)for(var a of n(t))r.call(t,a)&&i(e,a,t[a]);return e};import{c as p,L as s}from"./clientRender.721053fb.js";const d={};function c(e){var i,c=e,{components:u}=c,m=((e,t)=>{var a={};for(var i in e)o.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&n)for(var i of n(e))t.indexOf(i)<0&&r.call(e,i)&&(a[i]=e[i]);return a})(c,["components"]);return p("wrapper",(i=l(l({},d),m),t(i,a({components:u,mdxType:"MDXLayout"}))),p("h1",null,"Upgrade from v2"),p("h2",null,"Upgrade package versions"),p("p",null,"Upgrade these package versions:"),p("pre",null,p("code",l({parentName:"pre"},{className:"language-json"}),'{\n  "devDependencies": {\n    "@vitejs/plugin-react-refresh": "^1.3.1",\n    "vite": "^2.3.5",\n    "vite-plugin-mdx": "^3.3.1",\n    "vite-plugin-react-pages": "^3.0.0",\n    "vite-pages-theme-basic": "^3.0.0"\n  }\n}\n')),p("h2",null,"Install peerDependencies for mdx"),p("p",null,p("inlineCode",{parentName:"p"},"vite-plugin-mdx")," no longer install mdx-related peerDependencies for you. You should install them in your project:"),p("pre",null,p("code",l({parentName:"pre"},{className:"language-json"}),'{\n  "devDependencies": {\n    "@mdx-js/mdx": "^1.6.22",\n    "@mdx-js/react": "^1.6.22"\n  }\n}\n')),p("blockquote",null,p("p",{parentName:"blockquote"},p("a",l({parentName:"p"},{href:"https://github.com/brillout/vite-plugin-mdx"}),"vite-plugin-mdx")," has been moved to a seperate repo. (",p("a",l({parentName:"p"},{href:"https://github.com/vitejs/vite-plugin-react-pages/issues/6"}),"related issue"),")")),p("h2",null,"A Small update to theme API"),p("blockquote",null,p("p",{parentName:"blockquote"},p("strong",{parentName:"p"},"If you have only used the basic theme and haven't created a custom theme. You don't need to care about this API change."))),p("p",null,"In ",p("inlineCode",{parentName:"p"},"vite-plugin-react-pages@3.x"),", vite-pages don't pass staticData to the theme component any more. You should use the hook ",p("inlineCode",{parentName:"p"},"useStaticData")," to get staticData. This API update is for less prop drilling and more efficient HMR update during dev."),p("pre",null,p("code",l({parentName:"pre"},{className:"language-ts"}),"interface ThemeProps {\n  // staticData is removed, use useStaticData instead\n  readonly loadedData: PagesLoaded\n  readonly loadState: LoadState\n}\n\n/**\n * A react hook to get static data.\n * import { useStaticData } from 'vite-plugin-react-pages/client'\n */\nexport interface UseStaticData {\n  (): PagesStaticData\n  (path: string): Record<string, any>\n}\n")),p("p",null,"Here is an ",p("a",l({parentName:"p"},{href:"https://github.com/vitejs/vite-plugin-react-pages/commit/61f0fa0223ef28c526dfc7bd87bafd8de2523c38#diff-e18e1392eaf0be6f307cc5ba266f589b1517c4d991d6e0d5006c339fbe4b7ff6"}),"example upgrade commit"),"."),p("h2",null,"findPages API change"),p("blockquote",null,p("p",{parentName:"blockquote"},p("strong",{parentName:"p"},'If you have only used the "Basic Filesystem Routing Convention" and haven\'t used ',p("inlineCode",{parentName:"strong"},"findPages"),' to do "Advanced Filesystem Routing". You don\'t need to care about this API change.'))),p("p",null,"Previously, ",p("inlineCode",{parentName:"p"},"vite-plugin-react-pages")," don't react to the change from the fileSystem. If there is file add/update/unlink that will result in different pageData, you need to restart the dev server.\nIn ",p("inlineCode",{parentName:"p"},"vite-plugin-react-pages@3.x"),", vite-pages use chokidar to scan the fileSystem and watch for files."),p("blockquote",null,p("p",{parentName:"blockquote"},"Thanks ",p("a",l({parentName:"p"},{href:"https://github.com/aleclarson"}),"Alec Larson")," for the idea and initial implementation.")),p("p",null,'In order to handle the change from from the fileSystem, the "Advanced Filesystem Routing" API has changed from the ',p("inlineCode",{parentName:"p"},"findPages")," API to the ",p("inlineCode",{parentName:"p"},"pageStrategy")," API. Checkout ",p(s,{to:"/advanced-fs-routing",mdxType:"Link"},"the advanced-fs-routing doc")," to learn about the latest API."))}c.isMDXComponent=!0;var u=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:c});const m={};m.main=u;export default m;
